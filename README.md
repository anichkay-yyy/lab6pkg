# Документация к ЛР 6a/6b/6c: 3D каркас буквы «V» (Воронович) с трансформациями и проекциями

## Состав задания

- **6a**: построение и визуализация каркасной 3D-модели первой буквы фамилии (здесь — «V»).
- **6b**: реализация 3D-преобразований (масштабирование, перенос, вращение вокруг произвольной оси) с выводом итоговой матрицы.
- **6c**: построение трёх ортографических проекций на плоскости $Oxy$, $Oxz$, $Oyz$.

Приложение на `tkinter`/`matplotlib` визуализирует:
- 3D каркас буквы.
- Ортографические проекции.
- Позволяет задавать параметры трансформаций и видеть итоговую матрицу.

## Требования

- Python 3.8+
- Зависимости: `numpy`, `matplotlib` (см. `requirements.txt`)

Установка зависимостей:
```bash
pip install -r requirements.txt
```

`requirements.txt`:
```text
numpy
matplotlib
```

## Запуск

```bash
python clip_app.py
```

(Файл названия в примере: скрипт с GUI. Если у вас другое имя файла — замените.)

## Геометрическая модель

- 2D-контур буквы «V» задан набором вершин в плоскости $z=0$, затем экструзией вдоль оси $z$ формируется призма.
- Вершины хранятся в однородных координатах $[x, y, z, 1]^T$.
- Рёбра заданы индексами вершин.

## Алгоритмы и матрицы

### Масштабирование
Матрица:
$$
S = \begin{bmatrix}
s_x & 0 & 0 & 0 \\
0 & s_y & 0 & 0 \\
0 & 0 & s_z & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}
$$

### Перенос
Матрица:
$$
T = \begin{bmatrix}
1 & 0 & 0 & d_x \\
0 & 1 & 0 & d_y \\
0 & 0 & 1 & d_z \\
0 & 0 & 0 & 1
\end{bmatrix}
$$

### Вращение вокруг произвольной оси через начало
- Ось задаётся единичным вектором $u = (u_x, u_y, u_z)$.
- Угол $\theta$ в радианах.
- Матрица (формула Родрига):
$$
R = \begin{bmatrix}
u_x^2 C + c & u_x u_y C - u_z s & u_x u_z C + u_y s \\
u_y u_x C + u_z s & u_y^2 C + c & u_y u_z C - u_x s \\
u_z u_x C - u_y s & u_z u_y C + u_x s & u_z^2 C + c
\end{bmatrix}
$$
где $c = \cos\theta$, $s = \sin\theta$, $C = 1 - c$.
- Встраивается в $4 \times 4$ матрицу, нижняя строка и правый столбец — $[0, 0, 0, 1]$.

### Порядок применения
В коде итоговая матрица $M = T \cdot R \cdot S$ (сначала масштаб, затем вращение, затем перенос). Итоговая матрица накапливается: $M_{\text{total}} \leftarrow M \cdot M_{\text{total}}$.

### Ортографические проекции
- $Oxy$: берутся координаты $(x, y)$.
- $Oxz$: берутся координаты $(x, z)$.
- $Oyz$: берутся координаты $(y, z)$.

Проекции выполняются без перспективы, прямое выбрасывание одной координаты.

## Интерфейс

Левая панель — управление:

- **Масштабирование**: поля ввода $s_x, s_y, s_z$.
- **Перенос**: $d_x, d_y, d_z$.
- **Вращение**:
  - Угол (в градусах).
  - Ось: $u_x, u_y, u_z$.
- Кнопка **«Применить все»**: строит матрицу $T \cdot R \cdot S$, умножает на текущую $M_{\text{total}}$, применяет к базовым вершинам, обновляет графики и матрицу.
- Кнопка **«Сброс»**: сбрасывает $M_{\text{total}}$ в единичную, возвращает модель к базовой.
- Поле **итоговая матрица**: отображает $4 \times 4$ матрицу $M_{\text{total}}$.

Правая часть — графики (`matplotlib`):
- 3D-окно с каркасом (оси $X, Y, Z$, сетка).
- Ортографические проекции:
  - $Oxy$ — зелёным.
  - $Oxz$ — красным.
  - $Oyz$ — фиолетовым (вставка/inset).

Оси проекций и сетка отображаются для наглядности.

## Основные шаги работы

1. Запустите приложение.
2. При необходимости измените параметры масштабирования, переноса, вращения.
3. Нажмите «Применить все» — обновятся модель, проекции и матрица.
4. Для возврата к исходному виду — «Сброс».

## Ключевые функции (кратко)

- `build_letter_V(depth, scale_xy)`: строит вершины и рёбра каркаса.
- `translation_matrix`, `scaling_matrix`, `rotation_matrix`: формируют матрицы преобразований.
- `apply_transform(verts_h, M)`: применяет матрицу к однородным вершинам.
- `ortho_proj_Oxy/Oxz/Oyz`: возвращают 2D-пары для проекций.
- `plot_scene(...)`: отрисовка 3D и проекций.
- Класс `App`: GUI, обработка ввода, накопление матрицы, обновление визуализации.

## Замечания

- Ось вращения задаётся вектором; при нулевой длине в коде используется единичная матрица (нет вращения).
- Порядок применения преобразований важен (масштаб → вращение → перенос).
- Все вычисления — в плавающей точке, возможны накопления ошибок при многократных преобразованиях.
- Проекции ортографические, без перспективных искажений.
